<div th:fragment="organigrama" class="container-fluid">

  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
	<div id="organigrama" class="row justify-content-center">
  		<h1 class="col-auto">Nombre organigrama</h1>
	</div>
  <div id="chart_div"></div>

  <script>
    google.charts.load('current', { packages: ["orgchart"] });
    google.charts.setOnLoadCallback(pruebas);

    async function pruebas() {

      var data = new google.visualization.DataTable();
      data.addColumn('string', 'Name');
      data.addColumn('string', 'Manager');
      data.addColumn('string', 'ToolTip');


      var raw = "";

      var requestOptions = {
        method: 'GET',
        redirect: 'follow'
      };

      let req = await
              fetch("http://localhost:3040/api/grupo/buscar/619696aa2ae47f99bde6e1e7", requestOptions)
      let grupo = await req.json()

      let organi=[];
      for(let user of grupo.data.usuarios){
        organi.push([
          {'v':user.id,'f': user.nombre+'<div style="color:red; font-style:italic">'+user.nombreRol+'</div>'},
          user.idsuperiorInmediato,
          user.nombre
        ]);
      }

      data.addRows(organi);

      // Create the chart.
      var chart = new google.visualization.OrgChart(document.getElementById('chart_div'));
      // Draw the chart, setting the allowHtml option to true for the tooltips.
      chart.draw(data, { 'allowHtml': true });

    }
  </script>

</div>



